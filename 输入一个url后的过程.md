# 输入一个url后的过程

### 1.请求dns服务器，获取域名对应的ip地址

### 2.拿到IP地址后，通过ip地址找到对应的服务器，请求建立tcp连接（3次握手）

### 3.浏览器向服务器发送http Request（请求）包

### 4.服务器收到请求包后，通过调用自身的服务返回http Reponse（响应）包

### 5.浏览器收到http Reponse（响应）包后，开始渲染网页，收到所有的响应包后，断开

### 连接（4次挥手）



# 从域名到ip的转换过程

### 输入一个域名后，浏览器先查自己的缓存，没有查本地host文件的缓存，没有查本地路由器的缓存，没有向离自己最近的dns服务器请求，查它的缓存，没有本地dns服务器向根域名服务器请求，根域名服务器告诉本地域名服务器下次要查询的顶级域名服务器的ip。本地域名服务器向顶级域名服务器请求，顶级域名服务器告诉本地域名服务器下次查询的权限域名服务器的ip地址，本地域名服务器向权限域名服务器请求，权限域名服务器告诉本地域名服务器域名对应的ip。



### 浏览器缓存——>host文件缓存——>本地路由器缓存——>本地dns服务器缓存——>根dns服务器缓存——>顶级域名服务器缓存——>权限域名服务器缓存——>查询到ip（若没有则重复从根域名服务器开始的过程）







# http请求和响应包结构

## 请求：

### （1）请求方法、请求标识、协议版本号

### （2）请求头，许多有关的客户端环境和请求正文的有用信息。例如：连接的存活时间、

### 请求正文的长度、声明浏览器所使用的语言

### （3）请求正文，包含用户的信息



## 响应：

### （1）响应状态码和版本号

### （2）响应头，包含一些服务器的信息。例如：服务器类型、日期等

### （3）响应正文，服务器返回的html页面

